package mcmc_test

import (
	"distclus/core"
	"distclus/kmeans"
	"distclus/mcmc"
	"distclus/vectors"
	"testing"
)

var _space = vectors.Space{}

var _vectors = []core.Elemt{
	[]float64{7},
	[]float64{5},
	[]float64{38},
	[]float64{2},
	[]float64{1},
	[]float64{0},
	[]float64{1},
	[]float64{1},
	[]float64{1},
	[]float64{1},
	[]float64{1},
	[]float64{1},
	[]float64{2},
	[]float64{1},
	[]float64{1},
	[]float64{1},
	[]float64{2},
	[]float64{1},
	[]float64{1},
	[]float64{1},
	[]float64{1},
	[]float64{1},
	[]float64{1},
	[]float64{1},
	[]float64{2},
	[]float64{1},
	[]float64{1},
	[]float64{2},
	[]float64{1},
	[]float64{1},
	[]float64{1},
	[]float64{1},
	[]float64{1},
	[]float64{0},
	[]float64{2},
	[]float64{0},
	[]float64{1},
	[]float64{1},
	[]float64{0},
	[]float64{1},
	[]float64{1},
	[]float64{1},
	[]float64{0},
	[]float64{3},
	[]float64{1},
	[]float64{0},
	[]float64{0},
	[]float64{1},
	[]float64{1},
	[]float64{1},
	[]float64{2},
	[]float64{1},
	[]float64{1},
	[]float64{0},
	[]float64{2},
	[]float64{1},
	[]float64{0},
	[]float64{1},
	[]float64{1},
	[]float64{1},
	[]float64{0},
	[]float64{0},
	[]float64{2},
	[]float64{4},
	[]float64{1},
	[]float64{1},
	[]float64{1},
	[]float64{1},
	[]float64{1},
	[]float64{264},
	[]float64{30},
	[]float64{3},
	[]float64{1},
	[]float64{1},
	[]float64{2},
	[]float64{1},
	[]float64{1},
	[]float64{6},
	[]float64{1},
	[]float64{1},
	[]float64{2},
	[]float64{1},
	[]float64{1},
	[]float64{2},
	[]float64{1},
	[]float64{1},
	[]float64{1},
	[]float64{1},
	[]float64{2},
	[]float64{1},
	[]float64{2},
	[]float64{223},
	[]float64{1},
	[]float64{1},
	[]float64{1},
	[]float64{1},
	[]float64{1},
	[]float64{2},
	[]float64{3},
	[]float64{54},
	[]float64{1},
	[]float64{1},
	[]float64{1},
	[]float64{1},
	[]float64{11},
	[]float64{1},
	[]float64{47},
	[]float64{1},
	[]float64{1},
	[]float64{1},
	[]float64{2},
	[]float64{2},
	[]float64{1},
	[]float64{1},
	[]float64{1},
	[]float64{1},
	[]float64{1},
	[]float64{1},
	[]float64{3},
	[]float64{2},
	[]float64{1},
	[]float64{1},
	[]float64{12},
	[]float64{1},
	[]float64{1},
	[]float64{1},
	[]float64{1},
	[]float64{1},
	[]float64{4},
	[]float64{1},
	[]float64{1},
	[]float64{1},
	[]float64{1},
	[]float64{33},
	[]float64{1},
	[]float64{1},
	[]float64{1},
	[]float64{1},
	[]float64{1},
	[]float64{8},
	[]float64{1},
	[]float64{2},
	[]float64{1},
	[]float64{1},
	[]float64{1},
	[]float64{1},
	[]float64{2},
	[]float64{1},
	[]float64{1},
	[]float64{1},
	[]float64{1},
	[]float64{2},
	[]float64{1},
	[]float64{1},
	[]float64{2},
	[]float64{1},
	[]float64{3},
	[]float64{3},
	[]float64{1},
	[]float64{1},
	[]float64{1},
	[]float64{2},
	[]float64{2},
	[]float64{1},
	[]float64{21},
	[]float64{1},
	[]float64{2},
	[]float64{1},
	[]float64{1},
	[]float64{1},
	[]float64{1},
	[]float64{1},
	[]float64{1},
	[]float64{1},
	[]float64{1},
	[]float64{1},
	[]float64{1},
	[]float64{3},
	[]float64{4},
	[]float64{1},
	[]float64{1},
	[]float64{1},
	[]float64{1},
	[]float64{1},
	[]float64{1},
	[]float64{1},
	[]float64{1},
	[]float64{1},
	[]float64{1},
	[]float64{2},
	[]float64{1},
	[]float64{1},
	[]float64{5},
	[]float64{1},
	[]float64{2},
	[]float64{2},
	[]float64{1},
	[]float64{2},
	[]float64{1},
	[]float64{1},
	[]float64{1},
	[]float64{1},
	[]float64{2},
	[]float64{3},
}

func Test_RunSyncGivens(t *testing.T) {
	var implConf = mcmc.Conf{
		InitK:    2,
		Amp:      1,
		B:        .00001,
		McmcIter: 200,
		MaxK:     19,
	}
	var initializer = kmeans.GivenInitializer
	var algo = mcmc.NewAlgo(implConf, _space, []core.Elemt{}, initializer)

	for _, v := range _vectors {
		_ = algo.Push(v)
	}

	_ = algo.Run(false)

	centroids, _ := algo.Centroids()

	for _, c := range centroids {
		centroid := c.([]float64)
		if centroid[0] < 0 {
			t.Error("")
		}
	}
}
